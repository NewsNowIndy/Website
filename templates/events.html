{% extends "base.html" %}
{% block title %}Events — City-County Council Calendar{% endblock %}

{% block content %}
<div class="card">
  <div class="header-bar">
    <h1>City–County Council</h1>
    <div>
        <p class="small"> {{ pretty_range }}</p>
    </div>
    <div>
      <a class="btn" href="{{ url_for('events', week=prev_week) }}">&larr; Prev</a>
      <a class="btn" href="{{ url_for('events') }}">This Week</a>
      <a class="btn" href="{{ url_for('events', week=next_week) }}">Next &rarr;</a>
    </div>
  </div>
<!-- Week selector form 
  <form method="get" class="grid grid-3" style="margin-top:.75rem">
    <div>
      <label>ISO Week (YYYY-WW)</label>
      <input class="input" name="week" value="{{ '%04d-%02d' % (iso_year, iso_week) }}">
    </div>
    <div style="align-self:end"><button class="btn">Go</button></div>
    <div style="align-self:end"><a class="btn" href="{{ url_for('events') }}">Reset</a></div>
  </form>
</div>
-->

{% if not items %}
  <div class="card">
    <p class="muted">No events found for {{ pretty_range }}.</p>
  </div>
{% else %}
  <div class="card">
    <h2 class="h3">Meetings</h2>
    <div class="agenda">
      {% for e in items %}
        <div class="agenda-item">
          <div class="when">
            <div class="dow">{{ e.start.strftime("%a") }}</div>
            <div class="date">{{ e.start.strftime("%b %d") }}</div>
            <div class="time">{{ e.start.strftime("%I:%M %p") }}</div>
          </div>
          <div class="info">
            <div class="title">{{ e.title }}</div>
            {% if e.location %}<div class="loc small">{{ e.location }}</div>{% endif %}
            {% if e.url %}<div class="small"><a href="{{ e.url }}" target="_blank" rel="noopener">Details</a></div>{% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endif %}

<style>
.agenda { display: grid; gap: .75rem; }
.agenda-item { display:flex; gap:1rem; padding:.75rem; border:1px solid var(--border); border-radius:10px; }
.when { width: 120px; text-align:right; }
.dow { font-weight:700; }
.date, .time { opacity:.8; }
.title { font-weight:600; }
.loc { opacity:.85; }
@media (max-width: 640px) { .when { width: 90px; } }
</style>
{% endblock %}
